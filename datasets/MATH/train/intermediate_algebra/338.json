{
    "problem": "Let $f(x)=|2\\{x\\}-1|$ where $\\{x\\}$ denotes the fractional part of $x$. The number $n$ is the smallest positive integer such that the equation \\[nf(xf(x))=x\\]has at least $2012$ real solutions. What is $n$?\n\nNote: the fractional part of $x$ is a real number $y=\\{x\\}$ such that $0\\le y<1$ and $x-y$ is an integer.",
    "level": "Level 4",
    "type": "Intermediate Algebra",
    "solution": "The graph of $y = f(x)$ is shown below.\n\n[asy]\nunitsize(1.5 cm);\n\nint i;\n\ndraw((0,0)--(0,3));\ndraw((0,0)--(4,0));\ndraw((0,3)--(0.5,0)--(1,3)--(1.5,0)--(2,3)--(2.5,0)--(3,3)--(3.5,0)--(4,3));\n\nfor (i = 0; i <= 8; ++i) {\n  draw((i/2,0.1)--(i/2,-0.1));\n}\n\nlabel(\"$x$\", (4,0), E);\nlabel(\"$y$\", (0,3), N);\nlabel(\"$0$\", (0,-0.1), S);\nlabel(\"$\\frac{1}{2}$\", (1/2,-0.1), S);\nlabel(\"$1$\", (1,-0.1), S);\nlabel(\"$\\frac{3}{2}$\", (3/2,-0.1), S);\nlabel(\"$2$\", (2,-0.1), S);\nlabel(\"$\\frac{5}{2}$\", (5/2,-0.1), S);\nlabel(\"$3$\", (3,-0.1), S);\nlabel(\"$\\frac{7}{2}$\", (7/2,-0.1), S);\nlabel(\"$4$\", (4,-0.1), S);\nlabel(\"$0$\", (0,0), W);\nlabel(\"$1$\", (0,3), W);\n[/asy]\n\nIn particular, $0 \\le f(x) \\le 1$ for all $x.$  So,\n\\[0 \\le nf(xf(x)) \\le n,\\]which means that all solutions to $nf(xf(x)) = x$ lie in the interval $[0,n].$\n\nLet $a$ be an integer such that $0 \\le a \\le n - 1.$  Suppose $a \\le x < a + \\frac{1}{2}.$  Then\n\\[f(x) = |2 \\{x\\} - 1| = |2(x - a) - 1| = 1 + 2a - 2x.\\]Let\n\\[g(x) = xf(x) = x(1 + 2a - 2x).\\]Thus, we want to find the solutions to $f(g(x)) = \\frac{x}{n}.$\n\nIf $a = 0,$ then\n\\[g(x) = x(1 - 2x),\\]which satisfies $0 \\le g(x) \\le \\frac{1}{8}$ for $0 \\le x < \\frac{1}{2}.$  Then\n\\[f(g(x)) = 1 - 2g(x) = 4x^2 - 2x + 1.\\]We can check that\n\\[\\frac{3}{4} \\le 4x^2 - 2x + 1 \\le 1\\]for $0 \\le x < \\frac{1}{2}.$  But $\\frac{x}{n} \\le \\frac{1}{2},$ so there no solutions in this case.\n\nOtherwise, $a \\ge 1.$  Suppose $a \\le x < y < a + \\frac{1}{2}.$  We claim that $g(x) > g(y).$  This inequality is equivalent to\n\\[x(1 + 2a - 2x) > y(1 + 2a - 2y),\\]which in turn is equivalent to $(y - x)(2x + 2y - 2a - 1) > 0.$  Since $2x + 2y - 2a - 1 > 2a - 1 \\ge 1,$ the claim $g(x) > g(y)$ is established.\n\nThis means that $g(x)$ is strictly decreasing on the interval $a \\le x < a + \\frac{1}{2},$ so it maps the interval $\\left[ a, a + \\frac{1}{2} \\right)$ bijectively to the interval $(0,a].$  This means that $f(g(x))$ oscillates between 0 and 1 $2a$ times, so the line $y = \\frac{x}{n}$ intersects this graph $2a$ times.\n\nNow suppose $a + \\frac{1}{2} \\le x < a.$  Then\n\\[f(x) = |2\\{x\\} - 1| = |2(x - a) - 1| = 2x - 2a - 1.\\]Let\n\\[g(x) = xf(x) = x(2x - 2a - 1).\\]We can similarly establish that $g(x)$ is strictly increasing for $a + \\frac{1}{2} \\le x < a,$ so it maps the interval $\\left[ a + \\frac{1}{2}, a \\right)$ bijectively to the interval $[0, a + 1).$  This means that $f(g(x))$ oscillates between 0 and 1 $2a + 2$ times, so the line $y = \\frac{x}{n}$ intersects this graph $2a + 2$ times.\n\nTherefore, the total number of solutions is\n\\[\\sum_{a = 0}^{n - 1} (2a + 2a + 2) = 2 \\sum_{a = 0}^{n - 1} (2a + 1) = 2n^2.\\]Finally, the smallest such $n$ such that $2n^2 \\ge 2012$ is $n = \\boxed{32}.$"
}